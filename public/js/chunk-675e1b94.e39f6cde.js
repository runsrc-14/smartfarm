(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-675e1b94"],{"14fd":function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"chart"}},[e("apexchart",{ref:"chart",attrs:{type:"bar",height:"330",options:t.chartOptions,series:t.series}})],1)},n=[],i=(e("fb6a"),0),s=[],o=1e4,c=36e3,l=new Date,d={data:function(){return{day:[],days:[],series:[{data:s.slice()}],chartOptions:{chart:{id:"realtime",height:350,type:"line",animations:{enabled:!0,easing:"linear",dynamicAnimation:{speed:1e3}},zoom:{enabled:!1}},colors:["#d95100"],dataLabels:{enabled:!1},grid:{borderColor:null},stroke:{curve:"smooth"},title:{text:"Realtime Data From Sensor",align:"left"},markers:{size:0},xaxis:{type:"datetime",range:c},yaxis:{max:100},legend:{show:!1}}}},created:function(){this.getDayWiseTimeSeries(l.getTime(),10,{min:10,max:90}),console.log(l.getTime())},methods:{getDayWiseTimeSeries:function(t,a,e){var r=0;while(r<a){var n=t,c=Math.floor(Math.random()*(e.max-e.min+1))+e.min;s.push({x:n,y:c}),i=t,t+=o,r++}},getNewSeries:function(t,a){var e=t+o;i=e;for(var r=0;r<s.length-10;r++)s[r].x=e-c-o,s[r].y=0;s.push({x:e,y:Math.floor(Math.random()*(a.max-a.min+1))+a.min})},resetData:function(){s=s.slice(s.length-10,s.length)}},mounted:function(){var t=this;setInterval((function(){t.getNewSeries(i,{min:10,max:90}),t.$refs.chart.updateSeries([{data:s}])}),5e3)}},u=d,m=e("2877"),h=Object(m["a"])(u,r,n,!1,null,null,null);a["a"]=h.exports},"5a8f":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-row",{staticClass:"pa-0 d-flex justify-center"},[e("v-col",{attrs:{cols:"12",sm:"12"}},[this.currentUser?e("v-col",{attrs:{cols:"12",sm:"3"}},[e("v-row",{staticClass:"text-center",staticStyle:{"align-items":"center"}},[e("v-file-input",{staticStyle:{width:"4rem"},attrs:{accept:".csv","show-size":"",label:"เลือกไฟล์เพื่อพยากรณ์",chips:""},scopedSlots:t._u([{key:"selection",fn:function(a){var r=a.text;return[e("v-chip",{attrs:{small:"",label:"",color:"#C4F57E"}},[t._v(" "+t._s(r)+" ")])]}}],null,!1,3375965593),model:{value:t.file,callback:function(a){t.file=a},expression:"file"}}),this.file?e("v-btn",{staticClass:"ml-2",attrs:{small:"",text:"",color:"primary"},on:{click:function(a){return t.submitFiles()}}},[t._v("ยืนยัน")]):t._e()],1)],1):t._e(),e("v-row",{staticClass:"pl-6 ml-3"},[e("p",{class:{active:t.loaded},staticStyle:{cursor:"pointer"}},[t._v(" กราฟแสดงข้อมูลอุณหภูมิ ")]),e("v-spacer"),t.currentUser||t.admin?t._e():e("p",{staticClass:"pr-6",class:{active:t.loaded},staticStyle:{cursor:"pointer","font-size":"0.9rem",color:"red"},on:{click:function(a){return t.$router.push("/register")}}},[t._v(" กดที่นี่เพื่อพยากรณ์ด้วยตนเอง >> ")])],1),e("v-col",[e("v-snackbar",{attrs:{timeout:t.timeout,color:t.color,dense:""},scopedSlots:t._u([{key:"action",fn:function(a){var r=a.on,n=a.attrs;return[e("v-icon",t._g(t._b({attrs:{small:"",color:"white",text:""},on:{click:function(a){t.snackbar=!1}}},"v-icon",n,!1),r),[t._v(" mdi-close ")])]}}]),model:{value:t.snackbar,callback:function(a){t.snackbar=a},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")]),e("v-card",{staticClass:"pa-4",staticStyle:{"background-color":"rgb(255, 255, 255)"}},[t.loadChart||"ยังไม่มีข้อมูลการพยากรณ์"==t.NotData?t._e():e("div",{staticClass:"progress"},[e("v-progress-circular",{attrs:{size:60,width:7,color:"warning",indeterminate:""}})],1),t.loadChart||"ยังไม่มีข้อมูลการพยากรณ์"==t.NotData?t._e():e("p",{staticClass:"progress"},[t._v(" กำลังโหลดข้อมูลกราฟ ")]),""!=t.NotData&&t.numData.length<1?e("v-list",{staticClass:"text-center pa-2"},[e("v-icon",{attrs:{color:"warning",size:"4rem"}},[t._v("mdi-progress-close")]),e("p",[t._v(t._s(t.NotData))])],1):t._e(),t.loaded&&t.loadChart&&""!=t.ChartData.date?e("apexchart",{ref:"chart",attrs:{type:"line",MaxData:t.ChartData.max,MinData:t.ChartData.min,Date:t.ChartData.date}}):t._e()],1)],1),e("v-col",[e("div",{staticClass:"pa-3"},[e("span",{staticClass:"align-self-center pl-2 pr-2",class:{active:t.loaded},staticStyle:{cursor:"pointer"}},[t._v("ตารางสภาพอากาศและผลพยากรณ์")])]),e("v-card",[t.loadtable||"ยังไม่มีข้อมูลการพยากรณ์"==t.NotDataTable?t._e():e("div",{staticClass:"progress"},[e("v-progress-circular",{attrs:{size:60,width:7,color:"warning",indeterminate:""}})],1),t.loadtable||"ยังไม่มีข้อมูลการพยากรณ์"==t.NotDataTable?t._e():e("p",{staticClass:"progress"},[t._v(" กำลังโหลดข้อมูลตารางการพยากรณ์ ... ")]),""!=t.NotDataTable&&t.forcast.length<1?e("v-list",{staticClass:"text-center pa-2"},[e("v-icon",{attrs:{color:"warning",size:"4rem"}},[t._v("mdi-progress-close")]),e("p",[t._v(t._s(t.NotDataTable))])],1):t._e(),t.loadtable&&""!=t.forcast?e("Table",{attrs:{datatable:t.forcast}}):t._e()],1)],1),e("v-col",{attrs:{cols:"12",md:"9",sm:"12"}},[e("reactive",{attrs:{"chart-data":t.ChartData}})],1),!t.admin&&t.currentUser?e("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("v-card",{staticClass:"elevation-16 mx-auto",attrs:{width:"300"}},[e("v-card-title",{staticStyle:{"font-size":"1rem"}},[t._v(" ให้คะแนนการพยากรณ์ของระบบ ")]),e("v-card-text",[e("div",{staticClass:"text-center mt-8"},[e("v-rating",{attrs:{color:"yellow","background-color":"grey darken-1","empty-icon":"$ratingFull","half-increments":"",hover:""},model:{value:t.point,callback:function(a){t.point=a},expression:"point"}})],1)]),e("v-divider"),e("v-card-actions",{staticClass:"justify-space-between"},[e("v-btn",{attrs:{text:""},on:{click:function(a){t.dialog=!1}}},[t._v(" ไว้คราวหลัง ")]),e("v-btn",{attrs:{color:"primary",text:""},on:{click:function(a){return t.submitRating(t.currentUser.id)}}},[t._v(" ให้คะแนน ")])],1)],1)],1):t._e()],1)],1)},n=[],i=(e("99af"),e("caad"),e("d81d"),e("d3b7"),e("2532"),e("96cf"),e("1da1")),s=e("b883"),o=e("bc3a"),c=e.n(o),l=e("c1df"),d=e.n(l),u=e("f652"),m=e("14fd"),h={methods:{submitFiles:function(){var t=this;if(this.file){var a=new FormData;a.append("file",this.file),s["a"].csv(a,this.currentUser.id).then((function(){t.ChartGetData(),t.loadTableData(),t.snackbar=!0,t.text="อัพโหลดข้อมูลเรียบร้อย",t.color="success",t.file=[],t.$refs.chart.updateSeries([{data:t.ChartData}])})).catch((function(t){console.log({error:t})}))}else console.log("there are no files."),this.snackbar=!0,this.text="กรุณาเลือกไฟล์"},getDataall:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.resetState(),a.next=3,s["a"].getAll().then((function(a){t.days.min=a.data[0].date,t.date11=t.days.min,t.days.max=a.data[a.data.length-1].date,console.log(a.data[0]),t.ChartData.min=a.data.map((function(t){return t.MinTemp})),t.ChartData.max=a.data.map((function(t){return t.MaxTemp})),t.ChartData.date=a.data.map((function(t){return t.date})),t.loaded=!0})).catch((function(t){console.log(t.response.data.error)}));case 3:case"end":return a.stop()}}),a)})))()},resetState:function(){this.loaded=!1},requestData:function(){var t=this;null!==this.date11&&""!==this.date11&&"0000-00-00"!==this.date11&&"undefined"!==this.date11?(this.resetState(),s["a"].findDate(this.date11,this.date22).then((function(a){t.ChartData.min=a.data.map((function(t){return t.MinTemp})),t.ChartData.max=a.data.map((function(t){return t.MaxTemp})),t.ChartData.date=a.data.map((function(t){return t.date})),t.dates=["ระหว่าง ".concat(t.ChartData.date[0]," ถึง ").concat(a.data[a.data.length-1].date)],t.menu=!1,t.loaded=!0})).catch((function(t){console.log(t)}))):this.showError=!0},showChart:function(){this.loadChart=!0},ChartGetData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.currentUser&&(t.id_get=t.currentUser.id),t.currentUser||t.id_get,a.next=4,c.a.get("https://rmuti-surin-smartfarm.herokuapp.com/api/csv/GetCSv/".concat(t.id_get)).then((function(a){console.log(a.data),t.numData=a.data,t.ChartData.min=a.data.map((function(t){return t.MinTemp})),t.ChartData.max=a.data.map((function(t){return t.MaxTemp}));for(var e=0;e<a.data.length;e++)t.ChartData.date.push(d()(a.data[e].Date).locale("TH").add(543,"year").format("LL"));a.data.length>1?(t.loaded=!0,t.loadChart=!0):(console.log("ไม่มีข้อมูล"),t.NotData="ยังไม่มีข้อมูลการพยากรณ์",t.ChartData.min=[],t.ChartData.max=[],t.ChartData.date=[])})).catch((function(t){console.log(t)}));case 4:case"end":return a.stop()}}),a)})))()},loadTableData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,c.a.get("https://anycors-smf.herokuapp.com/https://api-rmuti.herokuapp.com/weather").then((function(a){a.data.length>1?(t.forcast=a.data.map(t.EditDate),t.loadtable=!0,t.dialog=!0):(t.NotDataTable="ยังไม่มีข้อมูลการพยากรณ์",t.forcast=[])})).catch((function(t){console.log(t)}));case 2:case"end":return a.stop()}}),a)})))()},EditDate:function(t){return{Date:d()(t.Date).locale("TH").add(543,"year").format("LL"),MaxTemp:t.MaxTemp,MinTemp:t.MinTemp,Rainfall:t.Rainfall,Evaporation:t.Evaporation,Sunshine:t.Sunshine,WindGustSpeed:t.WindGustSpeed,WindSpeed9am:t.WindSpeed9am,WindSpeed3pm:t.WindSpeed3pm,Humidity9am:t.Humidity9am,Humidity3pm:t.Humidity3pm,Pressure9am:t.Pressure9am,Pressure3pm:t.Pressure3pm,Cloud9am:t.Cloud9am,Cloud3pm:t.Cloud3pm,Temp9am:t.Temp9am,Temp3pm:t.Temp3pm,RainToday:t.RainToday,RISK_MM:t.RISK_MM,predicted:t.predicted,userId:t.userId}},submitRating:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,u["a"].rating(t.currentUser.id,t.point);case 2:case"end":return a.stop()}}),a)})))()}},computed:{currentUser:function(){return this.$store.state.auth.user},admin:function(){return!(!this.currentUser||!this.currentUser.roles)&&this.currentUser.roles.includes("ROLE_ADMIN")}},components:{apexchart:function(){return e.e("chunk-2d23803c").then(e.bind(null,"fe29"))},Table:function(){return Promise.all([e.e("chunk-7403238a"),e.e("chunk-2d2132de")]).then(e.bind(null,"ac28"))},reactive:m["a"]},mounted:function(){this.ChartGetData(),this.loadTableData()},beforeDestroy:function(){clearInterval(this.ChartGetData())},data:function(){return{tbload:!1,id_get:1,dialog:!1,point:0,tab:null,items:["กราฟแสดงข้อมูลอุณหภูมิ","ตารางสภาพอากาศและผลพยากรณ์"],textbar:["abc","def"],file:null,numData:[],loadtable:!1,setChart:0,isActive:!1,loadChart:!1,menu:!1,date11:"",date22:"",dates:[],dayz:"",selectedIndex:5,days:{min:"",max:"",show:""},value:null,day:"",query:"",city:"surin",country:"",intervalid1:"",datas:[],ChartData:{min:[],date:[],max:[]},loaded:!1,showError:!1,errorMessage:"เลือกวันที่ใหม่",NotData:"",NotDataTable:"",forcast:[],snackbar:!1,text:"",timeout:2e3,color:""}}},p=h,f=(e("a778"),e("2877")),v=e("6544"),g=e.n(v),b=e("8336"),x=e("b0af"),C=e("99d9"),D=e("cc20"),y=e("62ad"),_=e("169a"),w=e("ce7e"),k=e("23a7"),T=e("132d"),S=e("8860"),M=e("490a"),R=e("1d4d"),V=e("0fd9"),N=e("2db4"),U=e("2fa4"),z=Object(f["a"])(p,r,n,!1,null,null,null);a["default"]=z.exports;g()(z,{VBtn:b["a"],VCard:x["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:C["c"],VChip:D["a"],VCol:y["a"],VDialog:_["a"],VDivider:w["a"],VFileInput:k["a"],VIcon:T["a"],VList:S["a"],VProgressCircular:M["a"],VRating:R["a"],VRow:V["a"],VSnackbar:N["a"],VSpacer:U["a"]})},a276:function(t,a,e){},a778:function(t,a,e){"use strict";e("a276")}}]);
//# sourceMappingURL=chunk-675e1b94.e39f6cde.js.map